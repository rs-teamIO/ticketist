<div fxLayout="row" fxLayout.xs="column" class="main">
  <div fxFlex="30" fxLayout="column" fxFlexAlign="center center" class="basicInfoPanel">
    <form [formGroup]="newEventForm" (ngSubmit)="onSubmit()">
        <mat-form-field>
          <input matInput placeholder="Event Name" formControlName="eventName">
          <mat-error *ngIf="eventName.invalid && eventName.touched">
            Event name is required!
          </mat-error>
        </mat-form-field>

        <mat-form-field>
          <mat-select formControlName="category" placeholder="Category">
            <mat-option value="ENTERTAINMENT">Entertainment</mat-option>
            <mat-option value="SPORT">Sport</mat-option>
            <mat-option value="CULTURAL">Cultural</mat-option>
          </mat-select>
          <mat-error *ngIf="category.invalid && category.touched">
            Category is required!
          </mat-error>
        </mat-form-field>

        <mat-form-field>
          <input matInput [min]="minDate" [matDatepicker]="startDate" placeholder="Select start date" formControlName="startDate">
          <mat-datepicker-toggle matSuffix [for]="startDate"></mat-datepicker-toggle>
          <mat-datepicker #startDate></mat-datepicker>
          <mat-error *ngIf="startDateInfo.invalid && startDateInfo.touched">
            Start date is required!
          </mat-error>
        </mat-form-field>

        <mat-form-field>
          <input matInput [min]="minDate" [matDatepicker]="endDate" placeholder="Select end date" formControlName="endDate">
          <mat-datepicker-toggle matSuffix [for]="endDate"></mat-datepicker-toggle>
          <mat-datepicker #endDate></mat-datepicker>
          <mat-error *ngIf="endDateInfo.invalid && endDateInfo.touched">
            End date is required!
          </mat-error>
        </mat-form-field>

        <mat-form-field>
          <input matInput [min]="minDate" [matDatepicker]="reservationDeadline" placeholder="Select reservation deadline" formControlName="reservationDeadline">
          <mat-datepicker-toggle matSuffix [for]="reservationDeadline"></mat-datepicker-toggle>
          <mat-datepicker #reservationDeadline></mat-datepicker>
          <mat-error *ngIf="reservationDeadlineInfo.invalid && reservationDeadlineInfo.touched">
            Reservation deadline is required!
          </mat-error>
        </mat-form-field>

        <mat-form-field >
          <input matInput type="number" placeholder="Reservation limit" formControlName="reservationLimit">
          <mat-error *ngIf="reservationLimit.invalid && reservationLimit.touched">
            Reservation limit wrong format!
          </mat-error>
        </mat-form-field>

        <mat-form-field >
          <textarea matInput placeholder="Enter description" formControlName="description"></textarea>
          <mat-error *ngIf="description.invalid && description.touched">
            Description is required!
          </mat-error>
        </mat-form-field>

        <p>{{error}}</p>

        <button mat-raised-button color="primary" type="submit" class="submitButton" [disabled]="newEventForm.invalid">
          <span>Add Event</span>
        </button>
    </form>
  </div>
  <div fxLayout="column" fxFlex="70">
    <div fxLayout="row" class="venueSectorPanel">
      <form [formGroup]="sectorForm">
        <mat-form-field>
          <mat-select formControlName="venueName">
            <div>
              <mat-option *ngFor="let venue of activeVenues" [value]="venue.name">
                {{venue.name}}
              </mat-option>
            </div>
          </mat-select>
        </mat-form-field>
        <div formArrayName="sectors">
          <table id="sectorTable">
            <tr>
              <th>Sector name</th>
              <th>Max. Capacity</th>
              <th>Ticket price</th>
              <th>Capacity</th>
              <th>Numerated seats</th>
              <th>Active</th>
            </tr>
            <tr *ngFor="let sectorControl of sectorForm.get('sectors')['controls']; let i = index">
              <ng-container [formGroupName]="i">
                <td class="tableInput">{{sectorControl.controls.sectorName.value}}</td>
                <td class="tableInput">{{sectorControl.controls.maxCapacity.value}}</td>
                <td><input matInput formControlName="ticketPrice" class="tableInput"></td>
                <td><input matInput formControlName="capacity" class="tableInput"></td>
                <td class="tableInput">
                    <input type="checkbox" [value]="sectorControl.controls.numeratedSeats.value" formControlName="numeratedSeats">
                </td>
                <td class="tableInput">
                    <input type="checkbox" [value]="sectorControl.controls.active.value" formControlName="active">
                </td>
              </ng-container>
            </tr>
          </table>
        </div>
      </form>
    </div>
    <div fxLayout="row" class="imagePanel">
    </div>
  </div>
</div>
